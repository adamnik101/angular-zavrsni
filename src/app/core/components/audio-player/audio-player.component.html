<div class="audio-player-wrapper">
    @if (track) {
        <div class="track-main-info">
            <div class="image">
                <img src="{{track?.cover}}"/>
            </div>
            
            <div class="content">
                <div class="title">
                    <p>{{track?.title}}</p>
                    @if (track?.explicit) {
                        <mat-icon>explicit</mat-icon>
                    }
                </div>
                <div class="artists">
                    <div class="owner">
                        <a routerLink="/artists/{{track?.owner_id}}">{{track?.owner?.name}}</a>
                    </div>
    
                    <div class="features">
                        @for (feature of track?.features; track $index; let index = $index) {
                            @if (index !== 0) {,&nbsp;} @else {&nbsp;x&nbsp;} <a routerLink="/artists/{{feature.id}}">{{feature.name}}</a>
                        }
                    </div>
                </div>
            </div>
    
            <div class="actions">
                <div class="audio-actions">
                    <button mat-icon-button class="action-icon-button smallest" matTooltip="Shuffle" matTooltipPosition="above">
                        <mat-icon>shuffle</mat-icon>
                    </button>
    
                    <button mat-icon-button class="action-icon-button" (click)="skipPrevious()" matTooltip="Previous" matTooltipPosition="above">
                        <mat-icon>skip_previous</mat-icon>
                    </button>
                    
                    @if (!audioService.isPlaying()) {
                        <button mat-icon-button class="action-icon-button play" (click)="continue()" matTooltip="Play" matTooltipPosition="above">
                            <mat-icon>play_arrow</mat-icon>
                        </button>
                    } @else {
                        <button mat-icon-button class="action-icon-button play" (click)="pause()" matTooltip="Pause" matTooltipPosition="above">
                            <mat-icon>pause</mat-icon>
                        </button>
                    }
    
                    <button mat-icon-button class="action-icon-button" (click)="skipNext()" matTooltip="Next" matTooltipPosition="above">
                        <mat-icon>skip_next</mat-icon>
                    </button>
    
                    <button mat-icon-button class="action-icon-button smallest" matTooltip="Toggle Repeat" matTooltipPosition="above">
                        <mat-icon>repeat</mat-icon>
                    </button>
                </div>
    
                <div class="progress">
                    <div class="current-time">
                        <p>{{audioService.currentTime() | formatDurationFromSeconds}}</p>
                    </div>
                    
                    <mat-slider [min]="0" [max]="(+track!.duration) * 10" step="1">
                        <input matSliderThumb [value]="+audioService.currentTime() * 10" (dragStart)="onDragStart($event)" (dragEnd)="onDragEnd($event)">
                    </mat-slider>
    
                    <div class="duration">
                        <p>{{track?.duration! | formatDurationFromSeconds}}</p>
                    </div>
                </div>
            </div>
    
            <div class="other">
                <div class="queue">
                    <button mat-icon-button class="action-icon-button small">
                        <mat-icon>queue_music</mat-icon>
                    </button>
                </div>
                <div class="volume">
                    <button mat-icon-button class="action-icon-button small">
                        <mat-icon>volume_up</mat-icon>
                    </button>
    
                    <mat-slider min="1" max="5" step="0.5">
                        <input matSliderThumb value="1.5">
                    </mat-slider>
                </div>
            </div>
        </div>
    }
</div>